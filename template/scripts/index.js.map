{"version":3,"names":[],"mappings":"","sources":["index.js"],"sourcesContent":["'use strict';\n\n// Счетчик бутылок\nvar counter = 0;\ndocument.querySelector('.app__sign--plus').onclick = function () {\n\tcounter++;\n\tdocument.querySelector('.app__amount').innerText = counter;\n};\ndocument.querySelector('.app__sign--minus').onclick = function () {\n\tif (counter > 0) {\n\t\tcounter--;\n\t\tdocument.querySelector('.app__amount').innerText = counter;\n\t} else {\n\t\tcounter = 0;\n\t}\n};\n\n// Закрытие модальных окон смахиванием вниз\nvar swipeBlocks = document.querySelectorAll('.popup__swipe');\nvar x1 = null;\nvar y1 = null;\n\nif (swipeBlocks) {\n\tvar _loop = function _loop(i) {\n\t\tvar swipeBlock = swipeBlocks[i];\n\t\tswipeBlock.addEventListener('touchstart', handleTouchStart, false);\n\t\tswipeBlock.addEventListener('touchmove', handleTouchMove, false);\n\n\t\tfunction handleTouchStart(e) {\n\t\t\tvar firstTouch = e.touches[0];\n\t\t\tx1 = firstTouch.clientX;\n\t\t\ty1 = firstTouch.clientY;\n\t\t}\n\n\t\tfunction handleTouchMove(e) {\n\t\t\tif (!x1 || !y1) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar x2 = e.touches[0].clientX;\n\t\t\tvar y2 = e.touches[0].clientY;\n\n\t\t\tvar xDiff = x2 - x1;\n\t\t\tvar yDiff = y2 - y1;\n\n\t\t\tif (Math.abs(xDiff) < Math.abs(yDiff)) {\n\t\t\t\tif (yDiff > 0) {\n\t\t\t\t\tpopupClose(swipeBlock.closest('.popup'));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tx1 = null;\n\t\t\ty1 = null;\n\t\t}\n\t};\n\n\tfor (var i = 0; i < swipeBlocks.length; i++) {\n\t\t_loop(i);\n\t}\n}\n'use strict';\n\n// popup\nvar popupLinks = document.querySelectorAll('.popup-link');\nvar body = document.querySelector('body');\nvar lockPadding = document.querySelectorAll('.lock-padding');\n\nvar unlock = true;\n\nvar timeout = 400;\n\nif (popupLinks.length > 0) {\n\tvar _loop = function _loop(index) {\n\t\tvar popupLink = popupLinks[index];\n\t\tpopupLink.addEventListener(\"click\", function (e) {\n\t\t\tvar popupName = popupLink.getAttribute('href').replace('#', '');\n\t\t\tvar currentPopup = document.getElementById(popupName);\n\t\t\tpopupOpen(currentPopup);\n\t\t\te.preventDefault();\n\t\t});\n\t};\n\n\tfor (var index = 0; index < popupLinks.length; index++) {\n\t\t_loop(index);\n\t}\n}\n\nvar popupCloseIcon = document.querySelectorAll('.close-popup');\nif (popupCloseIcon.length > 0) {\n\tvar _loop2 = function _loop2(index) {\n\t\tvar el = popupCloseIcon[index];\n\t\tel.addEventListener('click', function (e) {\n\t\t\tpopupClose(el.closest('.popup'));\n\t\t\te.preventDefault();\n\t\t});\n\t};\n\n\tfor (var index = 0; index < popupCloseIcon.length; index++) {\n\t\t_loop2(index);\n\t}\n}\nfunction popupOpen(currentPopup) {\n\tif (currentPopup && unlock) {\n\t\tvar popupActive = document.querySelector('.popup._open');\n\t\tif (popupActive) {\n\t\t\tpopupClose(popupActive, false);\n\t\t} else {\n\t\t\tbodyLock();\n\t\t}\n\t\tcurrentPopup.classList.add('_open');\n\t\tcurrentPopup.addEventListener('click', function (e) {\n\t\t\tif (!e.target.closest('.popup__content')) {\n\t\t\t\tpopupClose(e.target.closest('.popup'));\n\t\t\t}\n\t\t});\n\t}\n}\nfunction popupClose(popupActive) {\n\tvar doUnlock = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n\tif (unlock) {\n\t\tpopupActive.classList.remove('_open');\n\t\tif (doUnlock) {\n\t\t\tbodyUnlock();\n\t\t}\n\t}\n}\n\nfunction bodyLock() {\n\tvar lockPaddingValue = window.innerWidth - document.querySelector('.app').offsetWidth + 'px';\n\n\tif (lockPadding.length > 0) {\n\t\tfor (var index = 0; index < lockPadding.length; index++) {\n\t\t\tvar _el = lockPadding[index];\n\t\t\t_el.style.paddingRight = lockPaddingValue;\n\t\t}\n\t}\n\tbody.style.paddingRight = lockPaddingValue;\n\tbody.classList.add('_lock');\n\n\tunlock = false;\n\tsetTimeout(function () {\n\t\tunlock = true;\n\t}, timeout);\n}\n\nfunction bodyUnlock() {\n\tsetTimeout(function () {\n\t\tif (lockPadding.length > 0) {\n\t\t\tfor (var index = 0; index < lockPadding.length; index++) {\n\t\t\t\tvar _el2 = lockPadding[index];\n\t\t\t\t_el2.style.paddingRight = '0px';\n\t\t\t}\n\t\t}\n\t\tbody.style.paddingRight = '0px';\n\t\tbody.classList.remove('_lock');\n\t}, timeout);\n\n\tunlock = false;\n\tsetTimeout(function () {\n\t\tunlock = true;\n\t}, timeout);\n}\n\ndocument.addEventListener('keydown', function (e) {\n\tif (e.which === 27) {\n\t\tvar popupActive = document.querySelector('.popup._open');\n\t\tpopupClose(popupActive);\n\t}\n});\n\n(function () {\n\tif (!Element.prototype.closest) {\n\t\tElement.prototype.closest = function (css) {\n\t\t\tvar node = this;\n\t\t\twhile (node) {\n\t\t\t\tif (node.matches(css)) return node;else node = node.parentElement;\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\t}\n})();\n\n(function () {\n\tif (!Element.prototype.matches) {\n\t\tElement.prototype.matches = Element.prototype.matchesSelector || Element.prototype.webkitMatchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector;\n\t}\n})();"],"file":"index.js"}